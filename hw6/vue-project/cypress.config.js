// Импорт функции defineConfig из пакета Cypress.
// Эта функция-обёртка служит для двух основных целей:
// 1. Предоставляет автодополнение (IntelliSense) и проверку типов для конфигурации,
//    что помогает избежать опечаток и ошибок.
// 2. Валидирует конфигурацию при запуске Cypress.
import { defineConfig } from 'cypress'

// Экспорт конфигурации по умолчанию.
// defineConfig принимает в качестве аргумента объект с настройками.
export default defineConfig({

  // Секция 'e2e' предназначена для конфигурации именно End-to-End тестирования.
  // (В Cypress также есть секция 'component' для компонентного тестирования, но здесь она не используется).
  e2e: {

    // Ключевая настройка, которая указывает Cypress, где искать тестовые файлы.
    // 'specPattern' принимает glob-шаблон (или массив шаблонов) для поиска тестов.
    // Значение 'cypress/e2e/**/*.{cy,spec}.{js,jsx,ts,tsx}' означает:
    // - Ищи в директории 'cypress/e2e/' (и всех её поддиректориях - '**')
    // - все файлы ('*')
    // - которые имеют в названии либо '.cy.', либо '.spec.' 
    // - и одно из расширений: .js, .jsx, .ts, .tsx
    // Примеры подходящих файлов: 
    //   cypress/e2e/login.cy.ts
    //   cypress/e2e/user-dashboard.spec.js
    //   cypress/e2e/admin/users.cy.js
    specPattern: 'cypress/e2e/**/*.{cy,spec}.{js,jsx,ts,tsx}',

    // Базовый URL-адрес вашего приложения для тестов.
    // Все команды, которые посещают страницы (например, `cy.visit('/login')`),
    // будут использовать этот URL как основу.
    // Таким образом, `cy.visit('/login')` превратится в 
    // `http://localhost:4173/login`.
    // 
    // Важное замечание: 
    // Обычно для сборки production используется порт 4173 (если вы используете Vite).
    // Однако во время РАЗРАБОТКИ приложение часто запущено на порту 5173.
    // Это значит, что перед запуском E2E-тестов вам нужно:
    // 1. Собрать приложение командой `npm run build`
    // 2. Запустить preview-сервер на порту 4173 командой `npm run preview`
    // 3. Запустить тесты: `npx cypress run` или `npx cypress open`
    // 
    // Альтернативный подход для тестирования dev-сборки:
    //   baseUrl: 'http://localhost:5173',
    //   А затем запускать приложение для разработки (`npm run dev`) перед тестами.
    // baseUrl: 'http://localhost:4173',
    e2e: {
      baseUrl: 'http://localhost:4173',
      supportFile: 'cypress/support/e2e.js'
    },
     component: {
      devServer: {
        framework: 'vue',
        bundler: 'vite'
      }
    }
  },
})